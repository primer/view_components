<script>
  // When `<relative-time>`’s `title` changes, update `#tooltip-link`’s associated `<tool-tip>`.
  new MutationObserver(function (mutationList) {
    for (const mutation of mutationList) {
      if (mutation.target.matches("relative-time")) {
        const title = mutation.target.getAttribute("title")
        const tooltipId = document.getElementById("tooltip-link")?.getAttribute("aria-describedby")
        const tooltip = document.getElementById(tooltipId)
        if (tooltip) {
          tooltip.textContent = title
        }
      }
    }
  }).observe(document.body, {
    attributeFilter: ["title"],
    subtree: true,
  });
</script>

<%= render(Primer::Beta::Link.new(href: "#", id: "tooltip-link")) do |link| %>
  <% link.with_tooltip(text: Time.utc(2020, 1, 1, 0, 0, 0).to_s) %>
  <%= render(Primer::Beta::RelativeTime.new(datetime: Time.utc(2020, 1, 1, 0, 0, 0), no_title: true)) %>
<% end %>